{"ast":null,"code":"import sendWalking from \"../../../responce/sendWalking.ts\";\nimport { animateMoveTo, animateVibrateCard } from \"../../../utils/animationUtils\";\nlet lastCardActive = {\n  name: '',\n  value: '',\n  ref: null\n};\nfunction cardClick(e, name, value, refCard, changeCardRef) {\n  if (e.target.dataset.side == 'back' && e.target.dataset.inTable != 'true') {\n    if (refCard.current) {\n      if (lastCardActive['name'] == name) {\n        const gameId = JSON.parse(localStorage.getItem('game_status') || '').gameId;\n        const code = sendWalking(gameId, name, value).catch(err => {\n          err.status == 400 && animateVibrateCard(refCard.current);\n        });\n      } else {\n        const {\n          y,\n          x,\n          height\n        } = refCard.current.getBoundingClientRect();\n        animateMoveTo(refCard.current, x, y - height / 4, 1, 0.3, 0, false);\n        const lastRef = lastCardActive['ref'];\n        if (lastRef && lastRef.current) {\n          const {\n            y,\n            x,\n            height\n          } = lastRef.current.getBoundingClientRect();\n          animateMoveTo(lastRef.current, x, y + height / 4, 1, 0.3, 0, false);\n        }\n        lastCardActive = {\n          name,\n          value,\n          ref: refCard\n        };\n      }\n    }\n  }\n}\nexport default cardClick;","map":{"version":3,"names":["sendWalking","animateMoveTo","animateVibrateCard","lastCardActive","name","value","ref","cardClick","e","refCard","changeCardRef","target","dataset","side","inTable","current","gameId","JSON","parse","localStorage","getItem","code","catch","err","status","y","x","height","getBoundingClientRect","lastRef"],"sources":["C:/Users/smeno/OneDrive/Рабочий стол/dur/src/game/res/components/gameCard/cardClick.ts"],"sourcesContent":["import sendWalking from \"../../../responce/sendWalking.ts\"\r\nimport { animateMoveTo, animateVibrateCard } from \"../../../utils/animationUtils\"\r\n\r\ntype TlastCardActive = {name:string,value: string,ref:React.MutableRefObject<HTMLElement> | null}\r\nlet lastCardActive:TlastCardActive = { name: '', value: '', ref: null }\r\n\r\nfunction cardClick(e, name, value, refCard, changeCardRef) {\r\n\tif (e.target.dataset.side == 'back' && e.target.dataset.inTable != 'true') {\r\n\t\tif (refCard.current) {\r\n\r\n\t\t\tif (lastCardActive['name'] == name) {\r\n\t\t\t\tconst gameId = JSON.parse(localStorage.getItem('game_status') || '').gameId\r\n\r\n\t\t\t\tconst code = sendWalking(gameId, name, value).catch(err=>{\r\n\t\t\t\t\terr.status == 400 && animateVibrateCard(refCard.current)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconst { y, x, height } = refCard.current.getBoundingClientRect()\r\n\t\t\t\tanimateMoveTo(\r\n\t\t\t\t\trefCard.current,\r\n\t\t\t\t\tx, y - height / 4, \r\n\t\t\t\t\t1, 0.3, 0, false\r\n\t\t\t\t)\r\n\r\n\t\t\t\tconst lastRef = lastCardActive['ref']\r\n\t\t\t\tif (lastRef && lastRef.current) {\r\n\t\t\t\t\tconst { y, x, height } = lastRef.current.getBoundingClientRect()\r\n\t\t\t\t\tanimateMoveTo(\r\n\t\t\t\t\t\tlastRef.current,\r\n\t\t\t\t\t\tx, y + height/4,\r\n\t\t\t\t\t\t1, 0.3, 0, false\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tlastCardActive = { name, value, ref: refCard }\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default cardClick"],"mappings":"AAAA,OAAOA,WAAW,MAAM,kCAAkC;AAC1D,SAASC,aAAa,EAAEC,kBAAkB,QAAQ,+BAA+B;AAGjF,IAAIC,cAA8B,GAAG;EAAEC,IAAI,EAAE,EAAE;EAAEC,KAAK,EAAE,EAAE;EAAEC,GAAG,EAAE;AAAK,CAAC;AAEvE,SAASC,SAASA,CAACC,CAAC,EAAEJ,IAAI,EAAEC,KAAK,EAAEI,OAAO,EAAEC,aAAa,EAAE;EAC1D,IAAIF,CAAC,CAACG,MAAM,CAACC,OAAO,CAACC,IAAI,IAAI,MAAM,IAAIL,CAAC,CAACG,MAAM,CAACC,OAAO,CAACE,OAAO,IAAI,MAAM,EAAE;IAC1E,IAAIL,OAAO,CAACM,OAAO,EAAE;MAEpB,IAAIZ,cAAc,CAAC,MAAM,CAAC,IAAIC,IAAI,EAAE;QACnC,MAAMY,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,CAACJ,MAAM;QAE3E,MAAMK,IAAI,GAAGrB,WAAW,CAACgB,MAAM,EAAEZ,IAAI,EAAEC,KAAK,CAAC,CAACiB,KAAK,CAACC,GAAG,IAAE;UACxDA,GAAG,CAACC,MAAM,IAAI,GAAG,IAAItB,kBAAkB,CAACO,OAAO,CAACM,OAAO,CAAC;QACzD,CAAC,CAAC;MACH,CAAC,MAAM;QACN,MAAM;UAAEU,CAAC;UAAEC,CAAC;UAAEC;QAAO,CAAC,GAAGlB,OAAO,CAACM,OAAO,CAACa,qBAAqB,CAAC,CAAC;QAChE3B,aAAa,CACZQ,OAAO,CAACM,OAAO,EACfW,CAAC,EAAED,CAAC,GAAGE,MAAM,GAAG,CAAC,EACjB,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KACZ,CAAC;QAED,MAAME,OAAO,GAAG1B,cAAc,CAAC,KAAK,CAAC;QACrC,IAAI0B,OAAO,IAAIA,OAAO,CAACd,OAAO,EAAE;UAC/B,MAAM;YAAEU,CAAC;YAAEC,CAAC;YAAEC;UAAO,CAAC,GAAGE,OAAO,CAACd,OAAO,CAACa,qBAAqB,CAAC,CAAC;UAChE3B,aAAa,CACZ4B,OAAO,CAACd,OAAO,EACfW,CAAC,EAAED,CAAC,GAAGE,MAAM,GAAC,CAAC,EACf,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KACZ,CAAC;QACF;QACAxB,cAAc,GAAG;UAAEC,IAAI;UAAEC,KAAK;UAAEC,GAAG,EAAEG;QAAQ,CAAC;MAC/C;IAED;EACD;AACD;AAEA,eAAeF,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}