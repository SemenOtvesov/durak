{"ast":null,"code":"import{gsap}from\"gsap\";import{animateMoveTo,animateVibrateCard}from\"../utils/animationUtils\";import G from\"../utils/mathUtils\";import{openCard}from\"../utils/cardUtils\";export const scriptedCardsMoves=function(activeCardData,className){let toCard=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let tempic=document.querySelectorAll(\".\"+className);let newTableCards=[];for(let i=0;i<tempic.length;i++){newTableCards.push(tempic[i]);}const cardStates=new Map();// Хранит состояние каждой карты\n// Функция для получения полного состояния карты\nfunction getCardState(card){return{scale:gsap.getProperty(card,\"scale\"),x:gsap.getProperty(card,\"x\"),y:gsap.getProperty(card,\"y\"),opacity:gsap.getProperty(card,\"opacity\"),rotate:gsap.getProperty(card,\"rotate\"),rotateY:gsap.getProperty(card,\"rotateY\")};}// Функция для применения сохраненного состояния карты\nfunction applyCardState(card,state){gsap.to(card,{scale:state.scale,x:state.x,y:state.y,opacity:state.opacity,rotate:state.rotate,rotateY:state.rotateY,duration:0.3});}function defaultSelfCards(){document.querySelectorAll(\".self_card\").forEach(card=>{card.classList.remove(\"b-card\");});}function deactiveSelfCards(){let aCard=document.querySelector(\".game .active-card\");if(aCard){let aW=aCard.getBoundingClientRect.width;gsap.to(aCard,{y:`+=${aW/2}`,rotate:`-=${8}`,duration:0.3});cardDeactive(aCard);}document.querySelectorAll(\".self_card\").forEach(card=>{card.classList.add(\"b-card\");});}function cardActive(card){card.classList.add(\"active-card\");}function cardDeactive(card){card.classList.remove(\"active-card\");}let activeCard;let cardsScale=1;let cCard;if(toCard!==null){let list=document.querySelectorAll(\".game_card\");for(let i=0;i<list.length;i++){if(list[i].dataset.name===toCard){cCard=list[i];break;}}}else{cCard=document.querySelector(\".enemy_card\");}let list=document.querySelectorAll(\".game_card\");for(let i=0;i<list.length;i++){if(list[i].dataset.name===activeCardData){activeCard=list[i];openCard(activeCard);break;}}let firstCard=newTableCards.length==0||newTableCards==1?true:false;// verifying card types\nactiveCard.classList.remove(\"self_card\");cardDeactive(activeCard);activeCard.classList.add(\"table_card\");activeCard.classList.add(className);newTableCards.push(activeCard);let rect=cCard.getBoundingClientRect();let commonY=rect.y;let newPosCard;// Установите общую Y координату для всех карт.\nif(toCard!=null){activeCard.style.zIndex=cCard.style.zIndex+1;newPosCard={x:firstCard?rect.x:rect.x,y:commonY-rect.height/5,z:rect.z+1};}else{newPosCard={x:firstCard?rect.x-rect.width+5:rect.x,y:commonY};}let newPosChangeCard={x:firstCard?rect.x+10:rect.x+rect.width+5,y:commonY};if(newTableCards.length%3==0&&toCard===null){setTimeout(()=>{let el2=null;let fullTable=[];let tableCards=document.querySelectorAll(\".table_card\");for(let i=0;i<tableCards.length;i++){fullTable.push(tableCards[i]);}for(let i=0;i<fullTable.length;i++){const el=fullTable[i];if(i==2){el2=el.getBoundingClientRect();}let elRect=el.getBoundingClientRect();let elY=elRect.y+elRect.height+5;animateMoveTo(el,null,elY,1,0.5,0);}if(el2){animateMoveTo(cCard,el2.x-5,null,cardsScale,0.3,0.1,false);}animateMoveTo(document.querySelector(\".change_card\"),document.documentElement.clientWidth/2-Math.min(20,document.documentElement.clientWidth*0.05,40),document.documentElement.clientHeight/2-60,1,0.6,0,false);},500);}animateMoveTo(activeCard,newPosCard.x,newPosCard.y,cardsScale,0.3,0.1// false\n);if(toCard==null){animateMoveTo(cCard,newPosChangeCard.x,newPosChangeCard.y,cardsScale,0.3,0.1,false);}};","map":{"version":3,"names":["gsap","animateMoveTo","animateVibrateCard","G","openCard","scriptedCardsMoves","activeCardData","className","toCard","arguments","length","undefined","tempic","document","querySelectorAll","newTableCards","i","push","cardStates","Map","getCardState","card","scale","getProperty","x","y","opacity","rotate","rotateY","applyCardState","state","to","duration","defaultSelfCards","forEach","classList","remove","deactiveSelfCards","aCard","querySelector","aW","getBoundingClientRect","width","cardDeactive","add","cardActive","activeCard","cardsScale","cCard","list","dataset","name","firstCard","rect","commonY","newPosCard","style","zIndex","height","z","newPosChangeCard","setTimeout","el2","fullTable","tableCards","el","elRect","elY","documentElement","clientWidth","Math","min","clientHeight"],"sources":["C:/Users/smeno/OneDrive/Рабочий стол/dur/src/game/scripts/scriptedCardsMoves.jsx"],"sourcesContent":["import { gsap } from \"gsap\";\r\nimport { animateMoveTo, animateVibrateCard } from \"../utils/animationUtils\";\r\nimport G from \"../utils/mathUtils\";\r\nimport { openCard } from \"../utils/cardUtils\";\r\n\r\nexport const scriptedCardsMoves = (\r\n  activeCardData,\r\n  className,\r\n  toCard = null\r\n) => {\r\n  let tempic = document.querySelectorAll(\".\" + className);\r\n  let newTableCards = [];\r\n  for (let i = 0; i < tempic.length; i++) {\r\n    newTableCards.push(tempic[i]);\r\n  }\r\n  const cardStates = new Map(); // Хранит состояние каждой карты\r\n  // Функция для получения полного состояния карты\r\n  function getCardState(card) {\r\n    return {\r\n      scale: gsap.getProperty(card, \"scale\"),\r\n      x: gsap.getProperty(card, \"x\"),\r\n      y: gsap.getProperty(card, \"y\"),\r\n      opacity: gsap.getProperty(card, \"opacity\"),\r\n      rotate: gsap.getProperty(card, \"rotate\"),\r\n      rotateY: gsap.getProperty(card, \"rotateY\"),\r\n    };\r\n  }\r\n\r\n  // Функция для применения сохраненного состояния карты\r\n  function applyCardState(card, state) {\r\n    gsap.to(card, {\r\n      scale: state.scale,\r\n      x: state.x,\r\n      y: state.y,\r\n      opacity: state.opacity,\r\n      rotate: state.rotate,\r\n      rotateY: state.rotateY,\r\n      duration: 0.3,\r\n    });\r\n  }\r\n\r\n  function defaultSelfCards() {\r\n    document.querySelectorAll(\".self_card\").forEach((card) => {\r\n      card.classList.remove(\"b-card\");\r\n    });\r\n  }\r\n  function deactiveSelfCards() {\r\n    let aCard = document.querySelector(\".game .active-card\");\r\n    if (aCard) {\r\n      let aW = aCard.getBoundingClientRect.width;\r\n      gsap.to(aCard, { y: `+=${aW / 2}`, rotate: `-=${8}`, duration: 0.3 });\r\n      cardDeactive(aCard);\r\n    }\r\n    document.querySelectorAll(\".self_card\").forEach((card) => {\r\n      card.classList.add(\"b-card\");\r\n    });\r\n  }\r\n  function cardActive(card) {\r\n    card.classList.add(\"active-card\");\r\n  }\r\n  function cardDeactive(card) {\r\n    card.classList.remove(\"active-card\");\r\n  }\r\n\r\n  let activeCard;\r\n  let cardsScale = 1;\r\n  let cCard;\r\n  if (toCard !== null) {\r\n    let list = document.querySelectorAll(\".game_card\");\r\n    for (let i = 0; i < list.length; i++) {\r\n      if (list[i].dataset.name === toCard) {\r\n        cCard = list[i];\r\n        break;\r\n      }\r\n    }\r\n  } else {\r\n    cCard = document.querySelector(\".enemy_card\");\r\n  }\r\n  let list = document.querySelectorAll(\".game_card\");\r\n  for (let i = 0; i < list.length; i++) {\r\n    if (list[i].dataset.name === activeCardData) {\r\n      activeCard = list[i];\r\n      openCard(activeCard);\r\n      break;\r\n    }\r\n  }\r\n  let firstCard =\r\n    newTableCards.length == 0 || newTableCards == 1 ? true : false;\r\n  // verifying card types\r\n\r\n  activeCard.classList.remove(\"self_card\");\r\n  cardDeactive(activeCard);\r\n  activeCard.classList.add(\"table_card\");\r\n  activeCard.classList.add(className);\r\n  newTableCards.push(activeCard);\r\n\r\n  let rect = cCard.getBoundingClientRect();\r\n\r\n  let commonY = rect.y;\r\n  let newPosCard; // Установите общую Y координату для всех карт.\r\n  if (toCard != null) {\r\n    activeCard.style.zIndex = cCard.style.zIndex + 1;\r\n    newPosCard = {\r\n      x: firstCard ? rect.x : rect.x,\r\n      y: commonY - rect.height / 5,\r\n      z: rect.z + 1,\r\n    };\r\n  } else {\r\n    newPosCard = {\r\n      x: firstCard ? rect.x - rect.width + 5 : rect.x,\r\n      y: commonY,\r\n    };\r\n  }\r\n  let newPosChangeCard = {\r\n    x: firstCard ? rect.x + 10 : rect.x + rect.width + 5,\r\n    y: commonY,\r\n  };\r\n  if (newTableCards.length % 3 == 0 && toCard === null) {\r\n    setTimeout(() => {\r\n      let el2 = null;\r\n      let fullTable = [];\r\n      let tableCards = document.querySelectorAll(\".table_card\");\r\n      for (let i = 0; i < tableCards.length; i++) {\r\n        fullTable.push(tableCards[i]);\r\n      }\r\n      for (let i = 0; i < fullTable.length; i++) {\r\n        const el = fullTable[i];\r\n        if (i == 2) {\r\n          el2 = el.getBoundingClientRect();\r\n        }\r\n        let elRect = el.getBoundingClientRect();\r\n        let elY = elRect.y + elRect.height + 5;\r\n        animateMoveTo(el, null, elY, 1, 0.5, 0);\r\n      }\r\n      if (el2) {\r\n        animateMoveTo(cCard, el2.x - 5, null, cardsScale, 0.3, 0.1, false);\r\n      }\r\n\r\n      animateMoveTo(\r\n        document.querySelector(\".change_card\"),\r\n        document.documentElement.clientWidth / 2 -\r\n          Math.min(20, document.documentElement.clientWidth * 0.05, 40),\r\n        document.documentElement.clientHeight / 2 - 60,\r\n        1,\r\n        0.6,\r\n        0,\r\n        false\r\n      );\r\n    }, 500);\r\n  }\r\n  animateMoveTo(\r\n    activeCard,\r\n    newPosCard.x,\r\n    newPosCard.y,\r\n    cardsScale,\r\n    0.3,\r\n    0.1\r\n    // false\r\n  );\r\n  if (toCard == null) {\r\n    animateMoveTo(\r\n      cCard,\r\n      newPosChangeCard.x,\r\n      newPosChangeCard.y,\r\n      cardsScale,\r\n      0.3,\r\n      0.1,\r\n      false\r\n    );\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}