{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\smeno\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\dur\\\\src\\\\game\\\\components\\\\initTimer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport finishTurn from \"../responce/sendFinishTurn.ts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Timer({\n  game,\n  setVisable,\n  type = 'init'\n}) {\n  _s();\n  const timerRef = useRef(null);\n  useEffect(() => {\n    let interval = null;\n    const current = timerRef.current;\n    if (current) {\n      if (type == 'init') {\n        let counter = 3;\n        interval = setInterval(() => {\n          counter--;\n          current.innerHTML = `${counter}`;\n          if (counter == 0) {\n            clearInterval(interval);\n            setVisable(false);\n          }\n        }, 1000);\n      } else {\n        let counter = 15;\n        interval = setInterval(() => {\n          counter--;\n          current.innerHTML = `${counter}`;\n          if (counter == 0) {\n            clearInterval(interval);\n            const gameId = JSON.parse(localStorage.getItem(\"game_status\") || '').gameId;\n            finishTurn(gameId).catch();\n          }\n        }, 1000);\n      }\n    }\n    return () => clearInterval(interval);\n  }, [game, timerRef]);\n  let check = game['playerAmount'];\n  if (check == undefined) {\n    check = game.players.length;\n  }\n  const attackerId = game === null || game === void 0 ? void 0 : game.players[game === null || game === void 0 ? void 0 : game.attackerIndex].id;\n  const userId = JSON.parse(localStorage.getItem('user') || '').id;\n  if (check == game.players.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `timer \n\t\t\t\t${game['playerAmount'] ? 'timer_fast_active' : 'timer_active'}\n\t\t\t\t${attackerId == userId ? 'green' : 'red'}\n\t\t\t\t`,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"time\",\n        ref: timerRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this);\n  } else {\n    return '';\n  }\n}\n_s(Timer, \"/gPr91I23C5MYSmlVUbYA7l794U=\");\n_c = Timer;\n;\nexport default Timer;\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useEffect","useRef","finishTurn","jsxDEV","_jsxDEV","Timer","game","setVisable","type","_s","timerRef","interval","current","counter","setInterval","innerHTML","clearInterval","gameId","JSON","parse","localStorage","getItem","catch","check","undefined","players","length","attackerId","attackerIndex","id","userId","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/smeno/OneDrive/Рабочий стол/dur/src/game/components/initTimer.tsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport finishTurn from \"../responce/sendFinishTurn.ts\";\r\n\r\nfunction Timer ({game, setVisable, type='init'}){\r\n\tconst timerRef = useRef<HTMLSpanElement>(null)\r\n\r\n\tuseEffect(()=>{\r\n\t\tlet interval: any = null\r\n\r\n\t\tconst current = timerRef.current\r\n\t\tif(current){\r\n\t\t\tif(type == 'init'){\r\n\t\t\t\tlet counter = 3\r\n\t\t\t\tinterval = setInterval(()=>{\r\n\t\t\t\t\tcounter--\r\n\t\t\t\t\tcurrent.innerHTML = `${counter}`\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(counter == 0){\r\n\t\t\t\t\t\tclearInterval(interval)\r\n\t\t\t\t\t\tsetVisable(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000)\r\n\t\t\t}else{\r\n\t\t\t\tlet counter = 15\r\n\t\t\t\tinterval = setInterval(()=>{\r\n\t\t\t\t\tcounter--\r\n\t\t\t\t\tcurrent.innerHTML = `${counter}`\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(counter == 0){\r\n\t\t\t\t\t\tclearInterval(interval)\r\n\t\t\t\t\t\tconst gameId = JSON.parse(localStorage.getItem(\"game_status\") || '').gameId\r\n\t\t\t\t\t\tfinishTurn(gameId).catch()\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ()=> clearInterval(interval)\r\n\t}, [game, timerRef])\r\n\r\n\tlet check = game['playerAmount']\r\n\tif(check == undefined){\r\n\t\tcheck = game.players.length\r\n\t}\r\n\tconst attackerId = game?.players[game?.attackerIndex].id\r\n\tconst userId = JSON.parse(localStorage.getItem('user') || '').id\r\n\tif(check == game.players.length){\r\n\t\treturn (\r\n\t\t\t<div className={\r\n\t\t\t\t`timer \r\n\t\t\t\t${game['playerAmount'] ? 'timer_fast_active': 'timer_active'}\r\n\t\t\t\t${attackerId == userId ? 'green' : 'red'}\r\n\t\t\t\t`\r\n\t\t\t}>\r\n\t\t\t\t<span className=\"time\" ref={timerRef}></span>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}else{\r\n\t\treturn ''\r\n\t}\r\n};\r\n\r\nexport default Timer;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,UAAU,MAAM,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvD,SAASC,KAAKA,CAAE;EAACC,IAAI;EAAEC,UAAU;EAAEC,IAAI,GAAC;AAAM,CAAC,EAAC;EAAAC,EAAA;EAC/C,MAAMC,QAAQ,GAAGT,MAAM,CAAkB,IAAI,CAAC;EAE9CD,SAAS,CAAC,MAAI;IACb,IAAIW,QAAa,GAAG,IAAI;IAExB,MAAMC,OAAO,GAAGF,QAAQ,CAACE,OAAO;IAChC,IAAGA,OAAO,EAAC;MACV,IAAGJ,IAAI,IAAI,MAAM,EAAC;QACjB,IAAIK,OAAO,GAAG,CAAC;QACfF,QAAQ,GAAGG,WAAW,CAAC,MAAI;UAC1BD,OAAO,EAAE;UACTD,OAAO,CAACG,SAAS,GAAG,GAAGF,OAAO,EAAE;UAEhC,IAAGA,OAAO,IAAI,CAAC,EAAC;YACfG,aAAa,CAACL,QAAQ,CAAC;YACvBJ,UAAU,CAAC,KAAK,CAAC;UAClB;QACD,CAAC,EAAE,IAAI,CAAC;MACT,CAAC,MAAI;QACJ,IAAIM,OAAO,GAAG,EAAE;QAChBF,QAAQ,GAAGG,WAAW,CAAC,MAAI;UAC1BD,OAAO,EAAE;UACTD,OAAO,CAACG,SAAS,GAAG,GAAGF,OAAO,EAAE;UAEhC,IAAGA,OAAO,IAAI,CAAC,EAAC;YACfG,aAAa,CAACL,QAAQ,CAAC;YACvB,MAAMM,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,CAACJ,MAAM;YAC3Ef,UAAU,CAACe,MAAM,CAAC,CAACK,KAAK,CAAC,CAAC;UAC3B;QACD,CAAC,EAAE,IAAI,CAAC;MACT;IACD;IAEA,OAAO,MAAKN,aAAa,CAACL,QAAQ,CAAC;EACpC,CAAC,EAAE,CAACL,IAAI,EAAEI,QAAQ,CAAC,CAAC;EAEpB,IAAIa,KAAK,GAAGjB,IAAI,CAAC,cAAc,CAAC;EAChC,IAAGiB,KAAK,IAAIC,SAAS,EAAC;IACrBD,KAAK,GAAGjB,IAAI,CAACmB,OAAO,CAACC,MAAM;EAC5B;EACA,MAAMC,UAAU,GAAGrB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEmB,OAAO,CAACnB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsB,aAAa,CAAC,CAACC,EAAE;EACxD,MAAMC,MAAM,GAAGZ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAACQ,EAAE;EAChE,IAAGN,KAAK,IAAIjB,IAAI,CAACmB,OAAO,CAACC,MAAM,EAAC;IAC/B,oBACCtB,OAAA;MAAK2B,SAAS,EACb;AACJ,MAAMzB,IAAI,CAAC,cAAc,CAAC,GAAG,mBAAmB,GAAE,cAAc;AAChE,MAAMqB,UAAU,IAAIG,MAAM,GAAG,OAAO,GAAG,KAAK;AAC5C,KACI;MAAAE,QAAA,eACA5B,OAAA;QAAM2B,SAAS,EAAC,MAAM;QAACE,GAAG,EAAEvB;MAAS;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC;EAER,CAAC,MAAI;IACJ,OAAO,EAAE;EACV;AACD;AAAC5B,EAAA,CAzDQJ,KAAK;AAAAiC,EAAA,GAALjC,KAAK;AAyDb;AAED,eAAeA,KAAK;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}