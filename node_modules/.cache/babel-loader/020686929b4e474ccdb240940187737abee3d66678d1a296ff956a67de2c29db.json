{"ast":null,"code":"import sendWalking from \"../../../responce/sendWalking.ts\";\nimport { animateMoveTo, animateVibrateCard } from \"../../../utils/animationUtils\";\nlet lastCardActive = {\n  name: '',\n  value: '',\n  ref: null,\n  lastX: 0,\n  lastY: 0\n};\nfunction cardClick(e, name, value, refCard) {\n  console.log('sdf');\n  if (e.target.dataset.side == 'back' && e.target.dataset.inTable != 'true') {\n    if (refCard.current) {\n      if (lastCardActive['name'] == name) {\n        const gameId = JSON.parse(localStorage.getItem('game_status') || '').gameId;\n        const code = sendWalking(gameId, name, value).catch(err => {\n          err.status == 400 && animateVibrateCard(refCard.current);\n        });\n      } else {\n        const lastRef = lastCardActive['ref'];\n        if (lastRef && lastRef.current) {\n          animateMoveTo(lastRef.current, lastCardActive.lastX, lastCardActive.lastY, 1, 0.3, 0, false);\n        }\n        const {\n          y,\n          x,\n          height\n        } = refCard.current.getBoundingClientRect();\n        animateMoveTo(refCard.current, x, y - height / 4, 1, 0.3, 0, false);\n        lastCardActive = {\n          name,\n          value,\n          ref: refCard,\n          lastX: x + 7,\n          lastY: y + 7\n        };\n      }\n    }\n  }\n  console.log('sdf');\n  if (e.target.dataset.side == 'onTable') {\n    console.log('sdfsd');\n  }\n}\nexport default cardClick;","map":{"version":3,"names":["sendWalking","animateMoveTo","animateVibrateCard","lastCardActive","name","value","ref","lastX","lastY","cardClick","e","refCard","console","log","target","dataset","side","inTable","current","gameId","JSON","parse","localStorage","getItem","code","catch","err","status","lastRef","y","x","height","getBoundingClientRect"],"sources":["C:/Users/smeno/OneDrive/Рабочий стол/dur/src/game/res/components/gameCard/cardClick.ts"],"sourcesContent":["import sendWalking from \"../../../responce/sendWalking.ts\"\r\nimport { animateMoveTo, animateVibrateCard } from \"../../../utils/animationUtils\"\r\n\r\ntype TlastCardActive = {name:string,value: string,ref:React.MutableRefObject<HTMLElement> | null, lastX: number, lastY: number}\r\nlet lastCardActive:TlastCardActive = { \r\n\tname: '', value: '', ref: null,\r\n\tlastX: 0, lastY: 0\r\n}\r\n\r\nfunction cardClick(e, name, value, refCard) {\r\n\tconsole.log('sdf')\r\n\tif (e.target.dataset.side == 'back' && e.target.dataset.inTable != 'true') {\r\n\t\tif (refCard.current) {\r\n\t\t\tif (lastCardActive['name'] == name) {\r\n\t\t\t\tconst gameId = JSON.parse(localStorage.getItem('game_status') || '').gameId\r\n\r\n\t\t\t\tconst code = sendWalking(gameId, name, value).catch(err=>{\r\n\t\t\t\t\terr.status == 400 && animateVibrateCard(refCard.current)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconst lastRef = lastCardActive['ref']\r\n\t\t\t\tif (lastRef && lastRef.current) {\r\n\t\t\t\t\tanimateMoveTo(\r\n\t\t\t\t\t\tlastRef.current,\r\n\t\t\t\t\t\tlastCardActive.lastX, lastCardActive.lastY,\r\n\t\t\t\t\t\t1, 0.3, 0, false\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { y, x, height } = refCard.current.getBoundingClientRect()\r\n\t\t\t\tanimateMoveTo(\r\n\t\t\t\t\trefCard.current, \r\n\t\t\t\t\tx, y - height / 4,\r\n\t\t\t\t\t1, 0.3, 0, false\r\n\t\t\t\t)\r\n\t\t\t\tlastCardActive = { name, value, ref: refCard, lastX: x+7, lastY: y+7 }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconsole.log('sdf')\r\n\t\tif(e.target.dataset.side == 'onTable'){\r\n\t\t\tconsole.log('sdfsd')\r\n\t\t}\r\n}\r\n\r\nexport default cardClick"],"mappings":"AAAA,OAAOA,WAAW,MAAM,kCAAkC;AAC1D,SAASC,aAAa,EAAEC,kBAAkB,QAAQ,+BAA+B;AAGjF,IAAIC,cAA8B,GAAG;EACpCC,IAAI,EAAE,EAAE;EAAEC,KAAK,EAAE,EAAE;EAAEC,GAAG,EAAE,IAAI;EAC9BC,KAAK,EAAE,CAAC;EAAEC,KAAK,EAAE;AAClB,CAAC;AAED,SAASC,SAASA,CAACC,CAAC,EAAEN,IAAI,EAAEC,KAAK,EAAEM,OAAO,EAAE;EAC3CC,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;EAClB,IAAIH,CAAC,CAACI,MAAM,CAACC,OAAO,CAACC,IAAI,IAAI,MAAM,IAAIN,CAAC,CAACI,MAAM,CAACC,OAAO,CAACE,OAAO,IAAI,MAAM,EAAE;IAC1E,IAAIN,OAAO,CAACO,OAAO,EAAE;MACpB,IAAIf,cAAc,CAAC,MAAM,CAAC,IAAIC,IAAI,EAAE;QACnC,MAAMe,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,CAACJ,MAAM;QAE3E,MAAMK,IAAI,GAAGxB,WAAW,CAACmB,MAAM,EAAEf,IAAI,EAAEC,KAAK,CAAC,CAACoB,KAAK,CAACC,GAAG,IAAE;UACxDA,GAAG,CAACC,MAAM,IAAI,GAAG,IAAIzB,kBAAkB,CAACS,OAAO,CAACO,OAAO,CAAC;QACzD,CAAC,CAAC;MACH,CAAC,MAAM;QACN,MAAMU,OAAO,GAAGzB,cAAc,CAAC,KAAK,CAAC;QACrC,IAAIyB,OAAO,IAAIA,OAAO,CAACV,OAAO,EAAE;UAC/BjB,aAAa,CACZ2B,OAAO,CAACV,OAAO,EACff,cAAc,CAACI,KAAK,EAAEJ,cAAc,CAACK,KAAK,EAC1C,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KACZ,CAAC;QACF;QAEA,MAAM;UAAEqB,CAAC;UAAEC,CAAC;UAAEC;QAAO,CAAC,GAAGpB,OAAO,CAACO,OAAO,CAACc,qBAAqB,CAAC,CAAC;QAChE/B,aAAa,CACZU,OAAO,CAACO,OAAO,EACfY,CAAC,EAAED,CAAC,GAAGE,MAAM,GAAG,CAAC,EACjB,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,KACZ,CAAC;QACD5B,cAAc,GAAG;UAAEC,IAAI;UAAEC,KAAK;UAAEC,GAAG,EAAEK,OAAO;UAAEJ,KAAK,EAAEuB,CAAC,GAAC,CAAC;UAAEtB,KAAK,EAAEqB,CAAC,GAAC;QAAE,CAAC;MACvE;IACD;EACD;EACAjB,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;EACjB,IAAGH,CAAC,CAACI,MAAM,CAACC,OAAO,CAACC,IAAI,IAAI,SAAS,EAAC;IACrCJ,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;EACrB;AACF;AAEA,eAAeJ,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}